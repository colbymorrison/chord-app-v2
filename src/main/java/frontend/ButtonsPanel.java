package frontend;

import backend.Chordy;
import backend.Duration;
import backend.ChordChart;
import jdk.nashorn.internal.objects.Global;
import org.apache.commons.io.FilenameUtils;
import org.jfugue.theory.Key;
import org.jfugue.theory.Note;

import javax.imageio.ImageIO;
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.lang.reflect.Field;
import java.util.ArrayList;
import java.util.List;

public class ButtonsPanel extends Panel {
    UI userInterface;

    public ArrayList<ImageIcon> getIconList() {
        return iconList;
    }

    private ArrayList<ImageIcon> iconList = new ArrayList<>();
    private JPanel panel;
    private JButton chordButton1;
    private JButton chordButton5;
    private JButton chordButton6;
    private JButton chordButton2;
    private JButton chordButton7;
    private JButton chordButton3;
    private JButton extraButton;
    private JButton chordButton4;

    public ButtonsPanel() {
        $$$setupUI$$$();
        panel.setPreferredSize(new Dimension(600, 700));
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("ButtonsPanel");
        frame.setContentPane(new ButtonsPanel().panel);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public void rootButtonHit(JButton rootButton) {
        userInterface.getChordChart().insertUseable(new Chordy(rootButton.getName(), "", Duration.QUARTER));
    }

    public void actionPerformed(ActionEvent evt) {
        //
    }

    public void getButtons() {
        //ChordChart chordchard = userInterface.getChordChart();
        //GlobalParametersPanel globalParametersPanel = userInterface.getGlobalParametersPanel();
        //String gpKey = globalParametersPanel.getKey();
        String gpKey = "Amin";
        Key key = new Key(gpKey);
        List<Note> notes = key.getScale().getIntervals().setRoot(key.getRoot().toString()).getNotes();
        for (Note n : notes) {
            try {
                toIcons(n);
            } catch (IOException ioe) {
                ioe.printStackTrace();
            }
        }
    }

    public void toIcons(Note n) throws IOException {
        File folder = new File("graphics/");
        File[] listOfFiles = folder.listFiles();
        String nStr = n.toString();
        for (File f : listOfFiles) {
            if (nStr.substring(0, nStr.length() - 1).equals(FilenameUtils.removeExtension(f.getName()))) {
                BufferedImage image = ImageIO.read(f);
                ImageIcon icon = new ImageIcon(image);
                icon.setDescription(nStr.substring(0, nStr.length() - 1));
                iconList.add(icon);
            }
        }
    }

    public void draw() {
        createUIComponents();
    }


    private void createUIComponents() {
        // TODO: place custom component creation code here
        this.getButtons();
        chordButton1 = new JButton();
        chordButton1.setIcon(this.getIconList().get(0));
        chordButton2 = new JButton();
        chordButton2.setIcon(this.getIconList().get(1));
        chordButton3 = new JButton();
        chordButton3.setIcon(this.getIconList().get(2));
        chordButton4 = new JButton();
        chordButton4.setIcon(this.getIconList().get(3));
        chordButton5 = new JButton();
        chordButton5.setIcon(this.getIconList().get(4));
        chordButton6 = new JButton();
        chordButton6.setIcon(this.getIconList().get(5));
        chordButton7 = new JButton();
        chordButton7.setIcon(this.getIconList().get(6));
        extraButton = new JButton();
        extraButton.setIcon(new )
    }

    /**
     * Method generated by IntelliJ IDEA GUI Designer
     * >>> IMPORTANT!! <<<
     * DO NOT edit this method OR call it in your code!
     *
     * @noinspection ALL
     */
    private void $$$setupUI$$$() {
        createUIComponents();
        panel = new JPanel();
        panel.setLayout(new com.intellij.uiDesigner.core.GridLayoutManager(2, 4, new Insets(0, 0, 0, 0), -1, -1));
        chordButton1.setText("");
        panel.add(chordButton1, new com.intellij.uiDesigner.core.GridConstraints(0, 0, 1, 1, com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER, com.intellij.uiDesigner.core.GridConstraints.FILL_NONE, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, null, null, null, 0, false));
        chordButton5.setText("");
        panel.add(chordButton5, new com.intellij.uiDesigner.core.GridConstraints(1, 0, 1, 1, com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER, com.intellij.uiDesigner.core.GridConstraints.FILL_NONE, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, null, null, null, 0, false));
        chordButton6.setText("");
        panel.add(chordButton6, new com.intellij.uiDesigner.core.GridConstraints(1, 1, 1, 1, com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER, com.intellij.uiDesigner.core.GridConstraints.FILL_NONE, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, null, null, null, 0, false));
        chordButton2.setText("");
        panel.add(chordButton2, new com.intellij.uiDesigner.core.GridConstraints(0, 1, 1, 1, com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER, com.intellij.uiDesigner.core.GridConstraints.FILL_NONE, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, null, null, null, 0, false));
        chordButton7.setText("");
        panel.add(chordButton7, new com.intellij.uiDesigner.core.GridConstraints(1, 2, 1, 1, com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER, com.intellij.uiDesigner.core.GridConstraints.FILL_NONE, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, null, null, null, 0, false));
        chordButton3.setText("");
        panel.add(chordButton3, new com.intellij.uiDesigner.core.GridConstraints(0, 2, 1, 1, com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER, com.intellij.uiDesigner.core.GridConstraints.FILL_NONE, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, null, null, null, 0, false));
        extraButton = new JButton();
        extraButton.setText("");
        panel.add(extraButton, new com.intellij.uiDesigner.core.GridConstraints(1, 3, 1, 1, com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER, com.intellij.uiDesigner.core.GridConstraints.FILL_NONE, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, null, null, null, 0, false));
        chordButton4.setText("");
        panel.add(chordButton4, new com.intellij.uiDesigner.core.GridConstraints(0, 3, 1, 1, com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER, com.intellij.uiDesigner.core.GridConstraints.FILL_NONE, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED, null, null, null, 0, false));
    }

    /**
     * @noinspection ALL
     */
    public JComponent $$$getRootComponent$$$() {
        return panel;
    }
}
